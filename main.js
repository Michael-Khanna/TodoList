(()=>{"use strict";let e,t=function(e,t,d,n){return{title:e,description:t,date:d,priority:n,finished:!1}},d=function(e,t,d){return e[t]=d,e},n=function(){let e={};return{Project:function(e,t){return{name:e,description:t,todos:{}}},addTodo:function(t,d){e[t].todos[d.title]=d},deleteTodo:function(t,d){delete e[t].todos[d.title]},addProject:function(t){e[t.name]=t},setProjects:function(){e=o.retrieveStorage()||{}},getProjects:function(){return e},updateTodo:function(t,d,n){e[t].todos[d]=n}}}(),o={updateStorage:function(){let e=n.getProjects();localStorage.setItem("TodoListData",JSON.stringify(e))},retrieveStorage:function(){let e=localStorage.getItem("TodoListData");return JSON.parse(e)}},i=function(){let e;if(null!=n.getProjects().Default)return e=n.getProjects().Default,e;e=n.Project("Default","Default Project"),n.addProject(e);let d=(new Date).toLocaleDateString();d=d.replaceAll("/","-");let i=t("Set Up List","Set up todo list with my current todos",d,1);return n.addTodo(e.name,i),o.updateStorage(),e},a=function(){let t=document.querySelector("#content"),d=document.createElement("div");d.classList.add("mainPage");let i=document.createElement("button"),a=document.createElement("button");i.classList.add("projectBtn"),i.textContent="Project+",a.classList.add("todoBtn"),a.textContent="Todo+",d.appendChild(a),d.appendChild(i);let l=document.createElement("div");l.classList.add("sideBar"),t.appendChild(l),t.appendChild(d);let r=function(t){c.clearInfo(),e=t.name;let d=document.querySelector(".mainPage"),n=document.createElement("div");n.classList.add("projPage");let o=document.createElement("div");o.classList.add("projHeader"),o.textContent=t.name;let i=document.createElement("div");i.classList.add("projDesc"),i.textContent=t.description,n.appendChild(o),n.appendChild(i),d.appendChild(n);let a=t.todos;for(let e in a){let t=a[e],d=document.createElement("div");d.textContent=t.title,d.classList.add("todo"),d.classList.add(`priority${t.priority}`),t.finished&&d.classList.add("finished"),d.setAttribute("id",e),d.addEventListener("click",(function(){s(d,t)})),n.appendChild(d)}},s=function(t,d){let i=t.getAttribute("id");if(t.classList.contains("todo")){t.classList.add("fullTodo"),t.classList.remove("todo");let a=document.createElement("div");a.setAttribute("expID",i);let l=document.createElement("div");l.classList.add("todoDesc"),l.textContent=d.description;let r=document.createElement("div");r.classList.add("todoDate"),r.textContent=d.date;let s=document.createElement("div");s.classList.add("todoBtns");let u=document.createElement("button");u.textContent="Finish",u.addEventListener("click",(function(){c.finished(t,d)}));let p=document.createElement("button");p.textContent="Delete",p.addEventListener("click",(function(){n.deleteTodo(e,d),o.updateStorage(),function(e){e.parentNode.removeChild(e)}(t)})),s.appendChild(u),s.appendChild(p),a.appendChild(l),a.appendChild(r),a.appendChild(s),t.appendChild(a)}else{let e=document.querySelector(`[expID = "${i}"]`);if(!e)return;t.classList.remove("fullTodo"),t.classList.add("todo"),t.removeChild(e)}};return{createProj:function(){let e=document.querySelector("body"),t=document.createElement("div"),d=document.createElement("div"),n=document.createElement("div"),o=document.createElement("div"),i=document.createElement("button"),a=document.createElement("button"),l=document.createElement("textarea"),r=document.createElement("textarea");t.classList.add("popup"),d.classList.add("topDiv"),n.classList.add("midDiv"),o.classList.add("botDiv"),l.classList.add("nameTxt"),l.placeholder="Project Name",r.classList.add("descTxt"),r.placeholder="Project Description",a.classList.add("subBtn"),a.addEventListener("click",c.subProj),a.textContent="Submit",i.classList.add("xBtn"),i.addEventListener("click",c.rmvPopup),i.textContent="X",t.appendChild(d),t.appendChild(n),t.appendChild(o),d.appendChild(i),d.appendChild(a),n.appendChild(l),o.appendChild(r),e.prepend(t)},displayProjs:function(){let e=n.getProjects(),t=document.querySelector(".sideBar");for(let d in e){if("Default"==d)continue;let n=document.createElement("div");n.textContent=d,n.classList.add("projName"),t.appendChild(n);let o=d;n.addEventListener("click",(function(){r(e[o])}))}},displayProj:function(e){let t=document.createElement("div");t.textContent=e.name,t.classList.add("projName"),l.appendChild(t),t.addEventListener("click",(function(){r(e)}))},displayTodo:function(e){let t=document.querySelector(".projPage"),d=document.createElement("div");d.textContent=e.title,d.classList.add("todo"),d.classList.add(`priority${e.priority}`),d.addEventListener("click",(function(){s(d,e)})),t.appendChild(d)},addTodo:function(){let e=document.querySelector("body"),t=document.createElement("div"),d=document.createElement("div"),n=document.createElement("button"),o=document.createElement("button"),i=document.createElement("input"),a=document.createElement("input"),l=document.createElement("input"),r=document.createElement("select");t.classList.add("popup"),d.classList.add("topDiv"),i.classList.add("todoInput"),i.placeholder="Todo Title",a.classList.add("todoInput"),a.placeholder="Todo Description",l.classList.add("todoInput"),l.type="date",r.classList.add("todoInput");for(let e=1;e<=5;e++){let t=document.createElement("option");t.textContent=`${e}`,r.add(t)}o.classList.add("subBtn"),o.addEventListener("click",c.subTodo),o.textContent="Submit",n.classList.add("xBtn"),n.addEventListener("click",c.rmvPopup),n.textContent="X",t.appendChild(d),d.appendChild(n),d.appendChild(o),t.appendChild(i),t.appendChild(a),t.appendChild(l),t.appendChild(r),e.prepend(t)}}}(),c=function(){let i=document.querySelector(".projectBtn"),c=document.querySelector(".todoBtn");i.addEventListener("click",a.createProj),c.addEventListener("click",a.addTodo);let l=function(){let e=document.querySelector(".popup");e.parentNode.removeChild(e)};return{rmvPopup:l,subProj:function(){let e=document.querySelector(".nameTxt"),t=document.querySelector(".descTxt"),d=e.value,i=t.value,c=n.Project(d,i);n.addProject(c),l(),a.displayProj(c),o.updateStorage()},subTodo:function(){let d=document.querySelectorAll(".todoInput"),i=[];for(let e=0;e<d.length;e++)i[e]=d[e].value;i[3]=parseInt(i[3]);let c=t(i[0],i[1],i[2],i[3]);n.addTodo(e,c),l(),a.displayTodo(c),o.updateStorage()},clearInfo:function(){let e=document.querySelector(".projPage");null!=e&&e.parentNode.removeChild(e)},finished:function(t,i){let a;t.classList.contains("finished")?(t.classList.remove("finished"),a=d(i,"finished",!1)):(t.classList.add("finished"),a=d(i,"finished",!0)),n.updateTodo(e,i.title,a),o.updateStorage()}}}();!function(){n.setProjects();let e=i();a.displayProj(e),a.displayProjs(),document.querySelector(".projName").click()}()})();